{
	"builders": [{
		"type": "virtualbox-iso",
		"iso_url": "{{user `iso_url`}}",
		"iso_checksum_type": "{{user `iso_checksum_type`}}",
		"iso_checksum": "{{user `iso_checksum`}}",
		"headless": false,
		"communicator": "winrm",
		"winrm_username": "hacker",
		"winrm_password": "hacker",
		"winrm_timeout": "1h",
		"shutdown_command": "shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
		"guest_os_type": "Windows10_64",
		"disk_size": 61440,
		"vm_name": "pentest-win10",
		"guest_additions_mode": "attach",
		"floppy_files": [
			"{{user `autounattend`}}",
			"scripts/winrm.ps1",
			"scripts/install.ps1"
		],
		"vboxmanage": [
			[
				"modifyvm", "{{.Name}}", "--memory", "4096"
			],
			[
				"modifyvm", "{{.Name}}", "--vram", "128"
			],
			[
				"modifyvm", "{{.Name}}", "--cpus", "2"
			],
			[
				"modifyvm", "{{.Name}}", "--natpf1", "guestwinrm,tcp,127.0.0.1,5985,,5985"
			],
			[
				"modifyvm", "{{.Name}}", "--clipboard",  "bidirectional"
			],
			[
				"sharedfolder", "add", "{{.Name}}", "--name", "pentest", "--hostpath", "c:\\pentest", "--automount"
			]
		]
	}],
	"provisioners": [
		{	
			"type": "powershell",
			"elevated_user": "hacker",
			"elevated_password": "hacker",
			"scripts": [
				"scripts/vbox_guest_additions.ps1"
			]
		},
		{	
			"type": "powershell",
			"scripts": [
				"scripts/finish.ps1"
			]
		}
	],
	"variables": {
		"iso_url": "./windows_10_evaluation_x64.iso",
		"iso_checksum_type": "md5",
		"iso_checksum": "cf812813211add8fe7c53b07b7caff8c",
		"autounattend": "./answer_files/10/Autounattend.xml"
	}
}
