{
	"builders": [{
		"type": "virtualbox-iso",
		"iso_url": "{{user `iso_url`}}",
		"iso_checksum_type": "{{user `iso_checksum_type`}}",
		"iso_checksum": "{{user `iso_checksum`}}",
		"headless": false,
		"communicator": "winrm",
		"winrm_username": "hacker",
		"winrm_password": "hacker",
		"winrm_timeout": "1h",
		"shutdown_command": "shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
		"guest_os_type": "Windows10_64",
		"disk_size": 61440,
		"vm_name": "pentest-win10",
		"guest_additions_mode": "attach",
		"floppy_files": [
			"{{user `autounattend`}}",
			"scripts/winrm.ps1",
			"scripts/install.ps1",
			"scripts/finish.ps1"
		],
		"vboxmanage": [
			[
				"modifyvm", "{{.Name}}", "--memory", "4096", "--vram", "128", "--cpus", "2"
			],
			[
				"modifyvm", "{{.Name}}", "--natpf1", "guestwinrm,tcp,127.0.0.1,5985,,5985"
			],
			[
				"modifyvm", "{{.Name}}", "--clipboard",  "bidirectional"
			],
			[
				"modifyvm", "{{.Name}}", "--usb", "on", "--usbehci", "on"
			],
			[
				"storageattach", "{{.Name}}", "--storagectl", "IDE Controller", "--port", "1", "--device", "1", "--type", "dvddrive", "--medium", "emptydrive"
			],
			[
				"sharedfolder", "add", "{{.Name}}", "--name", "pentest", "--hostpath", "c:\\pentest", "--automount"
			]
		]
	}],
	"provisioners": [
		{
			"type": "file",
			"source": "scripts/finish.ps1",
			"destination": "c:\\install\\finish.ps1"
		},	
		{	
			"type": "powershell",
			"elevated_user": "hacker",
			"elevated_password": "hacker",
			"scripts": [
				"scripts/vbox_guest_additions.ps1"
			]
		}
	],
	"variables": {
		"iso_url": "./windows_10_evaluation_x64.iso",
		"iso_checksum_type": "md5",
		"iso_checksum": "42aded341509945cd18fc01b833489e9",
		"autounattend": "./answer_files/10/Autounattend.xml"
	}
}
